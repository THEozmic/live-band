webpackJsonp([1],{"2mKR":function(e,n){},CwxL:function(e,n){},NHnr:function(e,n,i){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var t=i("7+uW"),a={render:function(){var e=this.$createElement,n=this._self._c||e;return n("div",{staticClass:"container",attrs:{id:"app"}},[n("router-view")],1)},staticRenderFns:[]};var o=i("VU/8")({name:"App"},a,!1,function(e){i("nQMc")},null,null).exports,s=i("/ocq"),c=i("Dd8w"),l=i.n(c),r={name:"HelloWorld",data:function(){return{sounds:[{key:"A",code:65,playing:!1,name:"clap",file:"./static/sounds/drums/clap.wav"},{key:"S",code:83,playing:!1,name:"hihat",file:"./static/sounds/drums/hihat.wav"},{key:"D",code:68,playing:!1,name:"kick",file:"./static/sounds/drums/kick.wav"},{key:"F",code:70,playing:!1,name:"openhat",file:"./static/sounds/drums/openhat.wav"},{key:"G",code:71,playing:!1,name:"boom",file:"./static/sounds/drums/boom.wav"},{key:"H",code:72,playing:!1,name:"ride",file:"./static/sounds/drums/ride.wav"},{key:"J",code:74,playing:!1,name:"snare",file:"./static/sounds/drums/snare.wav"},{key:"K",code:75,playing:!1,name:"tom",file:"./static/sounds/drums/tom.wav"},{key:"L",code:76,playing:!1,name:"tink",file:"./static/sounds/drums/tink.wav"}]}},methods:{playSound:function(e,n){if(e){var i=n?n.code:e.keyCode,t=(this.$refs[i]||[])[0];this.$refs.drum.querySelector('div[data-key="'+i+'"]');if(!t)return;(n=n||this.sounds.find(function(e){return e.code==i}))&&(n.playing=!0),t.currentTime=0,t.play(),this.$parent&&this.$parent.$emit("key:play",l()({instrument:"drumkit"},n))}},playSoundWithoutEvent:function(e){var n=(this.$refs[e]||[])[0];if(n){var i=this.sounds.find(function(n){return n.code==e});i&&(i.playing=!0),n.currentTime=0,n.play()}}},mounted:function(){var e=this;document.addEventListener("keydown",this.playSound.bind(this)),this.$parent&&this.$parent.$on("ws:key:play",function(n){"drumkit"==n.instrument&&e.playSoundWithoutEvent(n.code)}),this.sounds.forEach(function(n){var i=(e.$refs[n.code]||[])[0];i&&(i.onended=function(e){n.playing=!1})})}},y={render:function(){var e=this,n=e.$createElement,i=e._self._c||n;return i("div",{ref:"drum",staticClass:"keys"},[e._l(e.sounds,function(n){return i("div",{key:"sound"+n.key,staticClass:"key",class:{playing:n.playing},attrs:{"data-key":n.code},on:{mousedown:function(i){e.playSound(i,n)}}},[i("kbd",[e._v(e._s(n.key))]),e._v(" "),i("span",{staticClass:"sound"},[e._v(e._s(n.name))])])}),e._v(" "),e._l(e.sounds,function(e){return i("audio",{key:e.key,ref:e.code,refInFor:!0,attrs:{src:e.file}})})],2)},staticRenderFns:[]};var d=i("VU/8")(r,y,!1,function(e){i("rytq")},"data-v-4f3519f0",null).exports;function p(){return"./static/sounds/piano/"+this.key+".mp3"}var u={data:function(){return{activeOctave:1,blackKeyIndices:[2,4,7,9,11,14,16,19,21,23],sounds:[[{key:"Bb2",code:"8",playing:!1,file:p},{key:"A2",code:"u",playing:!1,file:p,sharp:"Bb2"},{key:"Ab2",code:"7",playing:!1,file:p},{key:"G2",code:"y",playing:!1,file:p,sharp:"Ab2"},{key:"Gb2",code:"6",playing:!1,file:p},{key:"F2",code:"t",playing:!1,file:p,sharp:"Gb2"},{key:"E2",code:"r",playing:!1,file:p},{key:"Eb2",code:"4",playing:!1,file:p},{key:"D2",code:"e",playing:!1,file:p,sharp:"Eb2"},{key:"Db2",code:"3",playing:!1,file:p},{key:"C2",code:"w",playing:!1,file:p,sharp:"Db2"},{key:"B1",code:"q",playing:!1,file:p},{key:"Bb1",code:"k",playing:!1,file:p},{key:"A1",code:"m",playing:!1,file:p,sharp:"Bb1"},{key:"Ab1",code:"j",playing:!1,file:p},{key:"G1",code:"n",playing:!1,file:p,sharp:"Ab1"},{key:"Gb1",code:"h",playing:!1,file:p},{key:"F1",code:"b",playing:!1,file:p,sharp:"Gb1"},{key:"E1",code:"v",playing:!1,file:p},{key:"Eb1",code:"f",playing:!1,file:p},{key:"D1",code:"c",playing:!1,file:p,sharp:"Eb1"},{key:"Db1",code:"d",playing:!1,file:p},{key:"C1",code:"x",playing:!1,file:p,sharp:"Db1"},{key:"B0",code:"z",playing:!1,file:p}],[{key:"Bb4",code:"8",playing:!1,file:p},{key:"A4",code:"u",playing:!1,file:p,sharp:"Bb4"},{key:"Ab4",code:"7",playing:!1,file:p},{key:"G4",code:"y",playing:!1,file:p,sharp:"Ab4"},{key:"Gb4",code:"6",playing:!1,file:p},{key:"F4",code:"t",playing:!1,file:p,sharp:"Gb4"},{key:"E4",code:"r",playing:!1,file:p},{key:"Eb4",code:"4",playing:!1,file:p},{key:"D4",code:"e",playing:!1,file:p,sharp:"Eb4"},{key:"Db4",code:"3",playing:!1,file:p},{key:"C4",code:"w",playing:!1,file:p,sharp:"Db4"},{key:"B3",code:"q",playing:!1,file:p},{key:"Bb3",code:"k",playing:!1,file:p},{key:"A3",code:"m",playing:!1,file:p,sharp:"Bb3"},{key:"Ab3",code:"j",playing:!1,file:p},{key:"G3",code:"n",playing:!1,file:p,sharp:"Ab3"},{key:"Gb3",code:"h",playing:!1,file:p},{key:"F3",code:"b",playing:!1,file:p,sharp:"Gb3"},{key:"E3",code:"v",playing:!1,file:p},{key:"Eb3",code:"f",playing:!1,file:p},{key:"D3",code:"c",playing:!1,file:p,sharp:"Eb3"},{key:"Db3",code:"d",playing:!1,file:p},{key:"C3",code:"x",playing:!1,file:p,sharp:"Db3"},{key:"B2",code:"z",playing:!1,file:p}],[{key:"Bb6",code:"8",playing:!1,file:p},{key:"A6",code:"u",playing:!1,file:p,sharp:"Bb6"},{key:"Ab6",code:"7",playing:!1,file:p},{key:"G6",code:"y",playing:!1,file:p,sharp:"Ab6"},{key:"Gb6",code:"6",playing:!1,file:p},{key:"F6",code:"t",playing:!1,file:p,sharp:"Gb6"},{key:"E6",code:"r",playing:!1,file:p},{key:"Eb6",code:"4",playing:!1,file:p},{key:"D6",code:"e",playing:!1,file:p,sharp:"Eb6"},{key:"Db6",code:"3",playing:!1,file:p},{key:"C6",code:"w",playing:!1,file:p,sharp:"Db6"},{key:"B5",code:"q",playing:!1,file:p},{key:"Bb5",code:"k",playing:!1,file:p},{key:"A5",code:"m",playing:!1,file:p,sharp:"Bb5"},{key:"Ab5",code:"j",playing:!1,file:p},{key:"G5",code:"n",playing:!1,file:p,sharp:"Ab5"},{key:"Gb5",code:"h",playing:!1,file:p},{key:"F5",code:"b",playing:!1,file:p,sharp:"Gb5"},{key:"E5",code:"v",playing:!1,file:p},{key:"Eb5",code:"f",playing:!1,file:p},{key:"D5",code:"c",playing:!1,file:p,sharp:"Eb5"},{key:"Db5",code:"d",playing:!1,file:p},{key:"C5",code:"x",playing:!1,file:p,sharp:"Db5"},{key:"B4",code:"z",playing:!1,file:p}],[{key:"Bb7",code:"8",playing:!1,file:p},{key:"A7",code:"u",playing:!1,file:p,sharp:"Bb7"},{key:"Ab7",code:"7",playing:!1,file:p},{key:"G7",code:"y",playing:!1,file:p,sharp:"Ab7"},{key:"Gb7",code:"6",playing:!1,file:p},{key:"F7",code:"t",playing:!1,file:p,sharp:"Gb7"},{key:"E7",code:"r",playing:!1,file:p},{key:"Eb7",code:"4",playing:!1,file:p},{key:"D7",code:"e",playing:!1,file:p,sharp:"Eb7"},{key:"Db7",code:"3",playing:!1,file:p},{key:"C8",code:"w",playing:!1,file:p,sharp:"Db7"},{key:"B7",code:"q",playing:!1,file:p},{key:"Bb7",code:"k",playing:!1,file:p},{key:"A7",code:"m",playing:!1,file:p,sharp:"Bb7"},{key:"Ab7",code:"j",playing:!1,file:p},{key:"G7",code:"n",playing:!1,file:p,sharp:"Ab7"},{key:"Gb7",code:"h",playing:!1,file:p},{key:"F7",code:"b",playing:!1,file:p,sharp:"Gb7"},{key:"E7",code:"v",playing:!1,file:p},{key:"Eb7",code:"f",playing:!1,file:p},{key:"D7",code:"c",playing:!1,file:p,sharp:"Eb7"},{key:"Db7",code:"d",playing:!1,file:p},{key:"C7",code:"x",playing:!1,file:p,sharp:"Db7"},{key:"B6",code:"z",playing:!1,file:p}]]}},computed:{keySounds:function(){return this.sounds.reduce(function(e,n){return e.concat(n)},[]).reduce(function(e,n){return e[n.key]=n,e},{})},blackKeys:function(){return this.blackKeyIndices.reduce(function(e,n){return e[n]=n,e},{})}},methods:{isMouseDown:function(e,n){e.buttons&&n()},playSound:function(e,n){if(e){var i=n?n.code:e.key,t=this.sounds[this.activeOctave];n=n||t.find(function(e){return e.code==i});var a=(this.$refs[(n||{}).key]||[])[0];if(!a)return;n&&(n.playing=!0),a.currentTime=0,a.play(),this.$parent&&this.$parent.$emit("key:play",{instrument:"piano",code:n.key})}},playSoundWithoutEvent:function(e){var n=this.keySounds[e];if(n){var i=(this.$refs[n.key]||[])[0];i&&(n.playing=!0,i.currentTime=0,i.play())}},playBlackKey:function(e,n,i){return this.playSound(e,n[i+1])},handleKey:function(e){if(e)switch(e.key){case"ArrowRight":this.activeOctave=Math.min(this.activeOctave+1,3);break;case"ArrowLeft":this.activeOctave=Math.max(this.activeOctave-1,0);break;default:this.playSound(e)}}},mounted:function(){var e=this;document.addEventListener("keydown",this.handleKey.bind(this)),this.$parent&&this.$parent.$on("ws:key:play",function(n){"piano"==n.instrument&&e.playSoundWithoutEvent(n.code)}),this.sounds.reduce(function(e,n){return e.concat(n)},[]).forEach(function(n){var i=(e.$refs[n.key]||[])[0];i&&(i.onplay=function(e){setTimeout(function(){n.playing=!1},300)},i.onended=function(){n.playing=!1})})}},f={render:function(){var e=this,n=e.$createElement,i=e._self._c||n;return i("div",{attrs:{id:"p-wrapper"}},[i("ul",e._l(e.sounds,function(n,t){return i("li",{key:t,staticClass:"octave",class:"octave-"+(t+3)+" "+(t==e.activeOctave&&"active")},[i("ul",{staticClass:"piano"},e._l(n,function(n,t){return i("li",{key:t},[n.key.length<3?i("div",{staticClass:"anchor",class:{active:n.playing},on:{mouseover:function(i){e.isMouseDown(i,function(){return e.playSound(i,n)})},mousedown:function(i){e.playSound(i,n)}}},[e._v("\n            "+e._s(n.key.toUpperCase())+"\n          ")]):e._e(),e._v(" "),n.sharp?i("span",{class:{active:e.keySounds[n.sharp].playing},on:{mouseover:function(i){e.isMouseDown(i,function(){return e.playSound(i,e.keySounds[n.sharp])})},mousedown:function(i){e.playSound(i,e.keySounds[n.sharp])}}},[e._v("\n            "+e._s(e.keySounds[n.sharp].key)+"\n          ")]):e._e()])}))])})),e._v(" "),e._l(e.sounds,function(n,t){return i("div",{key:t},e._l(n,function(e,n){return i("audio",{key:n,ref:e.key,refInFor:!0,attrs:{src:e.file()}})}))})],2)},staticRenderFns:[]};var k=i("VU/8")(u,f,!1,function(e){i("dP/8")},null,null).exports,h=i("mvHQ"),g=i.n(h),v=i("pFYg"),b=i.n(v),m={props:{},computed:{},data:function(){return{ws:null}},components:{},methods:{connect:function(){var e=this;return this.ws=new WebSocket("wss://live-band-server-vanisdbxzb.now.sh"),this.ws.onerror=function(e){return console.error("ws:"+ws.key,e)},this.ws.onopen=function(){console.log("WebSocket connection opened")},this.ws.onclose=function(){console.error("WebSocket connection closed"),setTimeout(e.connect,2e3)},this.ws.onmessage=function(n){try{n.data&&e.$emit("ws:key:play",JSON.parse(n.data))}catch(e){}},this.ws},send:function(e){this.ws&&this.ws.readyState==WebSocket.OPEN?"object"==(void 0===e?"undefined":b()(e))?this.ws.send(g()(e)):this.ws.send(e):console.error("ws:send","could not send message",e)}},mounted:function(){var e=this;this.connect(),this.$on("key:play",function(n){e.send(g()({instrument:n.instrument,code:n.code}))})}},w={render:function(){var e=this.$createElement;return(this._self._c||e)("div",[this._t("default")],2)},staticRenderFns:[]};var E={components:{WsRelay:i("VU/8")(m,w,!1,function(e){i("2mKR")},null,null).exports,DrumKit:d,Piano:k},data:function(){return{instruments:["drumkit","piano"],activeInstrument:0}},methods:{changeInstrument:function(e){"swipeup"==e&&(this.activeInstrument=(this.activeInstrument+1)%this.instruments.length)}}},_={render:function(){var e=this.$createElement,n=this._self._c||e;return n("div",{directives:[{name:"touch",rawName:"v-touch:swipe",value:this.changeInstrument,expression:"changeInstrument",arg:"swipe"}]},[n("WsRelay",[[n("DrumKit",{directives:[{name:"show",rawName:"v-show",value:0===this.activeInstrument,expression:"activeInstrument === 0"}]}),this._v(" "),n("Piano",{directives:[{name:"show",rawName:"v-show",value:1===this.activeInstrument,expression:"activeInstrument === 1"}]})]],2)],1)},staticRenderFns:[]};var D=i("VU/8")(E,_,!1,function(e){i("CwxL")},null,null).exports;t.a.use(s.a);var A=new s.a({routes:[{path:"/",name:"home",component:D}]}),S=i("TcX+");t.a.use(S.a,{gestures:["swipe"],directions:{swipe:["swipeup"]}}),t.a.config.productionTip=!1,new t.a({el:"#app",router:A,components:{App:o},template:"<App/>"})},"dP/8":function(e,n){},nQMc:function(e,n){},rytq:function(e,n){}},["NHnr"]);
//# sourceMappingURL=app.329720a2c0451669b2af.js.map